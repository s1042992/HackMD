# Aspect-oriented programming 
###### tags: `paper summary`, `software engineering`
## Summary:
  本篇作者認為當前的OOP (object-oriented programming)與procedural approach都不足以明確的表達一些程式中必須要執行的重要設計，有時會發生Cross-cutting，例如在執行一個功能前還要先進行權限檢查，或著在執行功能的前後必須紀錄log，等等。這些不屬於原本此功能的部分在程式碼中交互地被呼叫，使得程式碼實際上是互相糾結在一起，這會讓程式碼在日後開發及維護上造成不便。因此作者提出AOP (aspect-oriented programming)的設計概念，也就是允許開發人員在程式執行期間加入一些服務，例如安全檢查或是log紀錄，以降低或省去開發人員編寫這些程式的成本。作者在本篇定義了兩個重要的概念：component與aspect。在本篇的定義下如果一件事情可以被清楚的被封裝在一個generalized procedure的話，就叫做component，譬如物件、方法、API，等等。反之，若一件事情沒辦法像component一樣被清楚封裝在generalized procedure的話，就叫做aspect，aspect往往不是一個系統中能被拆解的單位，通常是一個屬性用以影響component的性能或語意，例如：記憶體存取模式以及同步物件。因此aspect主要就是將各個cross-cutting concern集合起來，設計為各個獨立且可重用的物件。AOP中的join point是指程式執行中的時間點，可以是一個函式的呼叫、或是建立物件的時間點，等等。而aspect由pointcut與advice組成，pointcut是一個描述資訊，用來修飾join point的，這樣我們就能知道那些joint point可以被織入advice，也就是只接受滿足point cut要求的joint point。而weaver是用來織合aspect language(AOP中用來寫aspect的語言，可對數據流圖中的節點進行簡單的操作)與component language(AOP中用來寫component的語言，用來實作程式的功能並且避免與aspect language負責控制的部分隔開來)的，依據織合時間點的不同，可以分為runtime weaving與compile-time weaving。作者在本篇論文中主要使用兩個例子來解釋並分析使用AOP架構的程式，並且認為使用AOP架構能夠比單純使用OOP的架構來的更好開發與維護，因為AOP架構有著更明確的設計，能夠清楚明白該物件的關注點，能將核心關注點中分離出橫切關注點，讓特定的問題或是該被額外處理的步驟從業務邏輯中獨立出來。但截至作者發表論文時，還沒有一個大型、複雜的程式使用AOP的概念進行開發，不過作者認為AOP一定可以達到比傳統OOP更好的效率，也期盼開發中的公司團體與學術界在結束使用AOP開發後能提供開發後的各數據，讓整篇論文更加完善。

## comment:
  此剖面導向程式設計的概念在當初寫作業時是第一次的進行實作，那時候覺得這個概念對我來說很新穎，也覺得很實用，像我們平常為了debug或是為了要了解當初程式執行的狀況常常在程式中加入很多個log，又或者要進行例外處理，因此就把這些與原本功能關係不大的內容寫進去一個類別中，導致程式碼互相糾結，在小型程式還好，但到了大型程式上，不管在開發還是維護上都會變成一個麻煩的問題。因此當我得知AOP這個概念以後，就覺得它可以做為一個OOP的輔助角色，很好的補足了我認為OOP在設計上不足的問題，將業務邏輯各部分進行隔離，讓業務邏輯個部分之間鬆藕合，提高程式的重用性。
在網路上有看到”OOP已死，AOP是新時代的開發方式”之類的謬論，OOP與AOP是兩種不同的設計邏輯，OOP封裝的是業務處理過程的實體以及其屬行和行為，為的是劃分出清晰的邏輯單位；AOP則是對業務處理過程中的剖面進行提取(可能是過程中的某步驟)，以此獲得邏輯過程中各部分鬆藕合的效果。舉個例子，將圖書館借書系統的”借書”這樣的業務實體進行封裝，理所應當為OOP的任務，我們可以建立一個Books的類別並將借書相關的屬性與行為封裝在其中，然而AOP的設計對”借書”進行封裝是無法去想像的，但是對於借書的權限檢查這個動作進行劃分就是AOP的目標領域。
有些人認為不需要AOP，一個良好定義的OOP架構也是可以做到一樣的事情，我個人也是認為這也許是對的，但是在OOP裡，當此類別要呼叫其他的方法時，呼叫方法的程式碼還是必須寫在該類別之中，這是無法避免的，因此當該類別進行修改時，可能會造成災難。但是AOP則不會造成此狀況，因為開發者只要修改相應的aspect後再重新織合即可。個人認為，目前的軟體開發上，OOP是不會被AOP所替代的，主要的核心架構一樣是由OOP撐起，AOP進行輔助，最後AOP會與OOP整合起來，達到相輔相成的效果。
但是在仔細思量後，我個人認為AOP還是有其缺點存在，最主要可能造成程式可讀性下降，譬如開發人員沒辦法直接從原本的程式碼上直接知道在做某動作之前或之後是否有進行權限檢查、log紀錄等，因為這些動作在AOP中寫的地方並不是在原本的物件裡。所以除非有寫註解或額外寫文件，不然開發人員無法直接、馬上知道總體流程。
